{%- assign site_url = site.url | append: site.baseurl -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": {{ site.brand.name | jsonify }},
  "url": {{ site_url | jsonify }},
  "logo": {{ site.brand.logo | absolute_url | jsonify }},
  "email": {{ "mailto:" | append: site.brand.email | jsonify }},
  "sameAs": [{% for s in site.brand.same_as %}{{ s | jsonify }}{% unless forloop.last %},{% endunless %}{% endfor %}]
  {%- if site.brand.contact_points %}
  ,
  "contactPoint": [
    {%- for cp in site.brand.contact_points -%}
    {
      "@type": "ContactPoint",
      "contactType": {{ (cp.contactType | default: cp.type) | jsonify }}
      {%- if cp.email %}, "email": {{ ("mailto:" | append: cp.email) | jsonify }}{% endif -%}
      {%- if cp.telephone %}, "telephone": {{ cp.telephone | jsonify }}{% endif -%}
      {%- if cp.areaServed %}, "areaServed": {{ cp.areaServed | jsonify }}{% endif -%}
      {%- if cp.availableLanguage %}, "availableLanguage": {{ cp.availableLanguage | jsonify }}{% endif -%}
      {%- if cp.url %}, "url": {{ cp.url | absolute_url | jsonify }}{% endif -%}
    }{% unless forloop.last %},{% endunless %}
    {%- endfor -%}
  ]
  {%- endif %}
}
</script>


<!-- Optional: WebSite + SearchAction -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "url": {{ site_url | jsonify }},
  "name": {{ site.brand.name | jsonify }},
  "potentialAction": {
    "@type": "SearchAction",
    "target": {{ site_url | append: "/search/?q={query}" | jsonify }},
    "query-input": "required name=query"
  }
}
</script>
